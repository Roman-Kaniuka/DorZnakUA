{"@t":"2024-09-01T19:41:17.9561093Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.InvalidOperationException: The value of 'UserRole.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"0ef7b615aa56b2e7258ce03df974f2c7","@sp":"eedfe479ff3a6015","contextType":"DorZnakUA.DAL.ApplicationDbContext","newline":"\r\n","error":"System.InvalidOperationException: The value of 'UserRole.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"c8dfb42c-ad55-4188-8a51-39872ddf881c","ActionName":"DorZnakUA.Api.Controller.AuthController.Register (DorZnakUA.Api)","RequestId":"80000006-0003-ff00-b63f-84710c7967bb","RequestPath":"/api/Auth/register"}
{"@t":"2024-09-01T19:46:52.2768120Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.InvalidOperationException: The value of 'UserRole.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"8370515be495ec4559eaa2ebc4cd983f","@sp":"5dfed5023d0aab74","contextType":"DorZnakUA.DAL.ApplicationDbContext","newline":"\r\n","error":"System.InvalidOperationException: The value of 'UserRole.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"43e8065b-2a1d-4572-bb18-cb85ff59f428","ActionName":"DorZnakUA.Api.Controller.AuthController.Register (DorZnakUA.Api)","RequestId":"80000002-0003-fd00-b63f-84710c7967bb","RequestPath":"/api/Auth/register"}
{"@t":"2024-09-01T19:47:49.3427663Z","@mt":"An error occurred using a transaction.","@l":"Error","@tr":"8370515be495ec4559eaa2ebc4cd983f","@sp":"5dfed5023d0aab74","EventId":{"Id":20205,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.TransactionError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"43e8065b-2a1d-4572-bb18-cb85ff59f428","ActionName":"DorZnakUA.Api.Controller.AuthController.Register (DorZnakUA.Api)","RequestId":"80000002-0003-fd00-b63f-84710c7967bb","RequestPath":"/api/Auth/register"}
{"@t":"2024-09-01T19:47:49.4195951Z","@mt":"This NpgsqlTransaction has completed; it is no longer usable.","@l":"Error","@x":"System.InvalidOperationException: This NpgsqlTransaction has completed; it is no longer usable.\r\n   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)\r\n   at Npgsql.NpgsqlTransaction.CheckReady()\r\n   at Npgsql.NpgsqlTransaction.Rollback(Boolean async, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)\r\n   at DorZnakUA.Application.Services.AuthService.Register(RegisterUserDto dto)","@tr":"8370515be495ec4559eaa2ebc4cd983f","@sp":"5dfed5023d0aab74","ActionId":"43e8065b-2a1d-4572-bb18-cb85ff59f428","ActionName":"DorZnakUA.Api.Controller.AuthController.Register (DorZnakUA.Api)","RequestId":"80000002-0003-fd00-b63f-84710c7967bb","RequestPath":"/api/Auth/register"}
